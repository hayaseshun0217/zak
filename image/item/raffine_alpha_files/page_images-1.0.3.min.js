/*
 page_images.js 1.0.3
 Copyright (c) 2014 Rakuten.Inc
 Date : 2014-04-18 13:00:34
*/
(function(g,J){if(g.jQuery!==J){jQuery.noConflict();var b=jQuery,A=[],B=[],v=-1,Z="rakutenLimitedId_ImageList-",$="rakutenLimitedId_ImageExp-",C,T,K,D=!1,o=!1,p=!1,q=!1,w,x,r,t,U,E=null,L=!1,F=null;b(document).ready(function(){function M(a,d){var l=a.offset();if(!(A[d]<=a.width()&&B[d]<=a.height()||E==l.left+":"+l.top)){clearTimeout(U);var c=b("#picture_message");0==c.length&&(b("body").append("<div id='picture_message'>画像をクリックして拡大イメージを表示</div>"),c=b("#picture_message"));c.css("width","auto");var f=
l.left;a.width()>c.width()&&c.css("width",a.width());var e=Math.ceil(l.top+(a.height()-c.outerHeight()));c.hide().css("left",f).css("top",e).fadeTo("normal",0.8);U=setTimeout(function(){c.fadeOut("normal")},1500);E=l.left+":"+l.top;c.mouseout(function(a){var d=c.offset();if(d.left>a.pageX||d.left+c.width()<=a.pageX||d.top+c.height()<=a.pageY)c.hide(),E=null})}}function J(){if(-1==v)for(i=0;i<y.length;i++){var a=b(y[i]).offset(),d=b(y[i]).attr("expid"),d=b("#"+$+d);if(0<d.length)d=d.closest("td"),
d.offset().left+d.width()<a.left||(a=a.left+b(y[i]).width(),v<a&&(v=a));else return!1}return!0}function N(a,d){D=!0;u.hide();c.attr("src","");e.removeAttr("style").addClass("rakutenLimitedId_ImagePopup_ImgLoading");O.css("border-color","#D3D3D3").hide().addClass("rakutenLimitedId_ImagePopup_ImgLoading");G.attr("src","").hide();var l=d.split("?"),g,f=b("#"+Z+a).find("div[src]");for(i=0;i<f.length;i++)g=b(f[i]).attr("src"),b(G[i]).attr("src",g+"?_ex=46x46&s=0&r=0"),icondiv=b(G[i]).closest("div.rakutenLimitedId_ImagePopup_IconDiv"),
b(icondiv).show(),g==l[0]&&b(icondiv).css("border-color","red");P();c.attr("src",l[0]);0<c.height()&&(H(),c.show())}function H(){q=!1;e.offset();c.height()<e.height()?c.css("top",(e.height()-c.height())/2):c.css("top",0);c.css("left",0);if(c.height()>e.height()){m.css("height",e.height());m.show();j.show();var a=e.height()/c.height()*m.height();j.css("top",0);j.css("height",a);q=!0}else j.hide(),m.hide();c.width()>e.width()?(n.css("width",e.width()),n.show(),k.show(),a=e.width()/c.width()*n.width(),
k.css("left",0),k.css("width",a),q=!0):(n.hide(),k.hide());q?e.css("cursor","url(//image.www.rakuten.co.jp/com/img/rms/storefront/pc/page/open.cur), auto"):e.css("cursor","auto")}function z(){o&&(o=!1);p&&(p=!1);q&&e.css("cursor","url(//image.www.rakuten.co.jp/com/img/rms/storefront/pc/page/open.cur), auto")}function V(a){j.offset();var d=j.height(),b=m.offset(),e=m.height(),a=-1!=t?t-(a.pageY-t)-w:a.pageY-w,f=a-b.top;a<b.top&&(f=0);a>b.top+e-d&&(f=e-d);j.css("top",f);d=f/e*c.height();c.css("top",
-d)}function W(a){k.offset();var d=k.width(),b=n.offset(),e=n.width(),a=-1!=r?r-(a.pageX-r)-x:a.pageX-x,f=a-b.left;a<b.left&&(f=0);a>b.left+e-d&&(f=e-d);k.css("left",f);d=f/e*c.width();c.css("left",-d)}function I(){Q.hide();h.hide();D=!1}function P(){if("undefined"!=typeof screen.deviceXDPI)K=screen.deviceXDPI;var a=760;b(g).width()<a?h.css("left",b(g).scrollLeft()):b(g).width()<a/0.8?h.css("left",b(g).scrollLeft()+(b(g).width()-a)/2):(a=Math.floor(0.8*b(g).width()),h.css("width",a),h.css("left",
b(g).scrollLeft()+Math.floor((b(g).width()-a)/2)),e.css("width",a-130));a=570;b(g).height()<a?h.css("top",b(g).scrollTop()+20):b(g).height()<a/0.8?h.css("top",b(g).scrollTop()+(b(g).height()-a)/2):(a=Math.floor(0.8*b(g).height()),h.css("height",a),h.css("top",b(g).scrollTop()+Math.floor((b(g).height()-a)/2)),e.css("height",a-50));h.show();H();b("body").live("click",X)}function X(a){var d=h.offset();if(a.pageY<d.top||a.pageX<d.left||a.pageX>=d.left+h.width()||a.pageY>=d.top+h.height())return I(),b("body").die("click",
X),!1}function R(){try{var a=b("#rakutenLImitedId_ImagePopupVars");if(null!=a&&1==a.length){var d=a.attr("trackvars"),c=a.attr("value");null!=d&&""!=d&&null!=c&&""!=c&&(a={},a[d]=s.prop9+c,SC.sendSTL(a))}}catch(e){}}var u=b("#rakutenLimitedId_ImageClip"),h=b("#rakutenLimitedId_ImagePopup"),e=b("#rakutenLimitedId_ImagePopup_MainDiv"),Y=b("#rakutenLimitedId_ImagePopup #rakutenLimitedId_ImagePopup_MainBackground"),c=b("#rakutenLimitedId_ImagePopup #rakutenLimitedId_ImagePopup_MainImg"),S=b("#rakutenLimitedId_ImagePopup #rakutenLimitedId_ImagePopup_MainFadeOut"),
m=b("#rakutenLimitedId_ImagePopup_Sideback"),j=b("#rakutenLimitedId_ImagePopup_Side"),n=b("#rakutenLimitedId_ImagePopup_Bottomback"),k=b("#rakutenLimitedId_ImagePopup_Bottom"),O=b("#rakutenLimitedId_ImagePopup .rakutenLimitedId_ImagePopup_IconDiv"),Q=b("#rakutenLimitedId_ImagePopup_Background"),y=b("#pagebody .rakutenLimitedId_ImageMain1-3 img[expid]"),G=b("#rakutenLimitedId_ImagePopup .rakutenLimitedId_ImagePopup_IconDiv img"),aa=b("#pagebody .rakutenLimitedId_ImageMain1-3"),ba=b("#pagebody a.rakutenLimitedId_ImageMain1-3"),
ca=b("#pagebody .rakutenLimitedId_ImageMainLink"),da=b("#rakutenLimitedId_ImagePopup_Close");y.mousemove(function(){}).mouseout(function(a){var d=b(this),c=d.offset();(c.left>a.pageX||c.top>a.pageY||c.left+d.width()<=a.pageX||c.top+d.height()<=a.pageY)&&u.hide();d=b("#picture_message");if(0!=d.length&&(c=d.offset(),c.left>a.pageX||c.top>a.pageY||c.left+d.width()<=a.pageX||c.top+d.height()<=a.pageY))d.hide(),E=null}).mouseover(function(){var a=b(this),d=a.attr("expid"),c=a.attr("src").split("?"),e=
c[0].split("/"),f=d+"-"+e[e.length-1];if(null!=A[f]&&null!=B[f])M(a,f);else if(d=new Image,d.onload=function(){A[f]=this.width;B[f]=this.height;M(a,f)},d.src=c[0],0<d.height)A[f]=d.width,B[f]=d.height,M(a,f)});ba.click(function(){return!1});b(g).scroll(function(){u.hide();clearTimeout(C);C=setTimeout(function(){},100)});u.mousemove(function(){}).mouseout(function(a){var d=(void 0).offset();if(d.left>a.pageX||d.top>a.pageY||d.left+(void 0).width()<=a.pageX||d.top+(void 0).height()<=a.pageY)u.hide(),
(void 0).hide()}).click(function(){N((void 0).attr("expid"),(void 0).attr("src"));R()});aa.click(function(){N(b(this).attr("expid"),b(this).find("img").attr("src"));R();return!1});ca.click(function(){N(b(this).attr("expid"),b(this).attr("imgsrc"));R();return!1});O.mousemove(function(){if(!o&&!p){var a=b(this).find("img"),a=b(a).attr("src").split("?");if(c.attr("src")!=a[0])if(O.css("border-color","#D3D3D3"),b(this).css("border-color","red"),L)F=this;else{L=!0;F=null;e.addClass("rakutenLimitedId_ImagePopup_ImgLoading");
h.offset();e.offset();var d=e.width()>=c.width()?c.position().left:c.css("left"),l=e.height()>=c.height()?(e.height()-c.height())/2:c.css("top");S.css("left",d).css("top",l).css("filter","Alpha(opacity=100)");S.attr("src",c.attr("src")).show();Y.show();c.hide();c.attr("src",a[0]);c.css("filter","Alpha(opacity=100)");setTimeout(function(){S.fadeOut(300,function(){L=!1;null!=F?b(F).trigger("mousemove"):Y.hide()})},100);0<c.height()&&(H(),setTimeout(function(){c.fadeIn(150)},1))}}});k.mousedown(function(a){var d=
k.offset();x=a.pageX-d.left;r=-1;p=!0;return!1});n.mousedown(function(a){var d=k.offset(),b=k.width(),e=n.offset(),f=n.width();a.pageX<d.left?(b=d.left-e.left-b,0>b&&(b=0),k.css("left",b),f=b/f*c.width(),c.css("left",-f)):a.pageX>d.left+b?(a=d.left+b-e.left+b,a>f&&(a=f),k.css("left",a-b),f=(a-b)/f*c.width(),c.css("left",-f)):(d=k.offset(),x=a.pageX-d.left,r=-1,p=!0);return!1});j.mousedown(function(a){var b=j.offset();w=a.pageY-b.top;o=!0;t=-1;return!1});m.mousedown(function(a){var b=j.offset(),e=
j.height(),g=m.offset(),f=m.height();a.pageY<b.top?(e=b.top-g.top-e,0>e&&(e=0),j.css("top",e),f=e/f*c.height(),c.css("top",-f)):a.pageY>b.top+e?(a=b.top+e-g.top+e,a>f&&(a=f),j.css("top",a-e),f=(a-e)/f*c.height(),c.css("top",-f)):(b=j.offset(),w=a.pageY-b.top,o=!0,t=-1);return!1});h.mousemove(function(a){o&&V(a);p&&W(a);return!1});Q.mousemove(function(a){o&&V(a);p&&W(a);return!1}).click(I);h.mouseup(z);Q.mouseup(z);b("body").mouseup(z);b(g).mouseup(z);b.browser.msie||b(g).blur(z);da.click(I);b(g).resize(function(){u.hide();
D&&("undefined"!=typeof K?(K!=screen.deviceXDPI&&I(),clearTimeout(T),T=setTimeout(function(){P();D=!0},5)):P());-1!=v&&(v=-1,J());clearTimeout(C);C=setTimeout(function(){},100)});e.mousedown(function(a){if(q){c.height()>e.height()&&(o=!0);c.width()>e.width()&&(p=!0);var b=j.offset();w=a.pageY-b.top;b=k.offset();x=a.pageX-b.left;r=a.pageX;t=a.pageY;e.css("cursor","url(//image.www.rakuten.co.jp/com/img/rms/storefront/pc/page/grab.cur), auto")}return!1});G.load(function(){var a=b(this).closest("div.rakutenLimitedId_ImagePopup_IconDiv");
b(a).removeClass("rakutenLimitedId_ImagePopup_ImgLoading");b(this).show()});c.load(function(){e.removeClass("rakutenLimitedId_ImagePopup_ImgLoading");H();setTimeout(function(){c.fadeIn(150)},1)})})}})(this);
